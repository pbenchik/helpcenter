# Использование параметров

## Использование сохраненных данных

Для использования данных в шаблонах, вставьте соответствующие переменные в двойные фигурные скобки.



**Дефолтное использование параметров в ссылках**

**\{{chatId\}}** - Telegram ID

**\{{username\}}** - Telegram username

**\{{name\}}** - имя пользователя

**\{{createdAt\}}** - дата создания диалога

**\{{fields.key любого кастом филда\}}** - любой ваш кастом филд, созданный в Bot Settings

**\{{tracker.key любого трекер филда\}}** - любой параметр из трекер филд, добавленный в параметрах кампании в Трекере

{% hint style="info" %}
Например, **`https://some.service.com/signup?refId={{fields.refId}}`**
{% endhint %}



## Примеры



1\) Если пользователь открыл лендинг с utm параметром ad\_name=test, то у пользователя будет трекер филд ad\_name со значением test. **Затем вы сможете его использовать в общении с пользователем**, например `https://some.service.com/signup?ad_name={{tracker.ad_name}}.`&#x20;

Также, **каждый пользователь дополнительно имеет кликайди** - уникальный параметр для каждого пользователя. **Его значение можно получить, используя макрос \{{tracker.clickid\}}.**



2\) Если вы, например, **хотите** **отправить приветственное сообщение с именем пользователя,** то вы можете **создать степ Send Message** и **в тексте сообщения добавить текст** например Hello, \{{name\}}.

Частым примером использования параметров из чата является генерация ссылки на регистрацию в партнерке. Например, https://partner.com/signup?sub1=\{{tracker.clickid\}}. Таким образом вы предоставите пользователю ссылку на регистрацию в партнерку и запишите в sub1 наш clickid. Если, например, clickid пользователя =test123, то пользователь получит ссылку https://partner.com/signup?sub1=test123



{% hint style="info" %}
**После отправки ID клиента, могу ли я проверить его в своей БД и переключить степ в зависимости от результата?**
{% endhint %}

**Вы можете в степе вебхук слать себе айди, которого нужно переключить.** Взяв нужный вам параметр, вы проверите нужно ли переключать степ или нет.

[**`https://test.com?chatId={chatId}`**](https://test.com/?chatId={chatId}\&stepId={stepId})\
\
&#x20;Например, если пользователь имеет Telegram ID - 123, то вебхук отправится по адресу (URL) [**`https://test.com?chatId=123`**](https://test.com/?chatId={chatId}\&stepId={stepId}). &#x20;

Затем вы можете отправить запрос на созданный вебхук в боте `https://app.chatterfy.ai/api/bots/webhooks/<POSTBACK_ID>/updateDialog?chatId=123&stepId=`**`[степ на который нужно переключить пользователя]`**`&status=auto`





## Добавление кастомных переменных в боте



Теперь в настройках бота (Bot Settings) появилась возможность создавать кастомные переменные, которые можно использовать через макросы.

1. Перейдите в раздел Bot Settings&#x20;
2. Пролистайте вниз, найдите поле Bot variables&#x20;
3. В поле ''Name" укажите кастомную переменную, например variables.regLink&#x20;
4. В поле Value вставьте само значение переменной, например [https://pp.com?clickid=\{{tracker.clickid\}}](https://pp.com/?clickid=\{{tracker.clickid\}})

{% hint style="success" %}
Вместо того, чтобы постоянно вставлять ссылку из примера выше в степах или сообщениях, можно использовать просто \{{variables.regLink\}}
{% endhint %}

